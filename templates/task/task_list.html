{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}
  <h1>To do List
    <a href="{% url 'task:task-create' %}" style="color: blue"> Add new task </a>
  </h1>
  {% if task_list %}
    {% for task in task_list %}
      <p><strong>{{ task.content }} {% if task.is_completed %} Done! {% else %} Not done {% endif %}</strong></p>
      <p>Created at: {{ task.created_at }} {% if task.deadline %} Deadline: {{ task.deadline }} {% endif %}</p>
      <p>Tags:
        {% for tag in task.tag.all %}
          {{ tag.name }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
      </p>
      <p><a href="{% url 'task:task-update' pk=task.id %}">Update</a> <a href="{% url 'task:task-delete' pk=task.id %}">Delete</a></p>
    {% endfor %}
  {% else %}
    <p>There are no tasks in list yet.</p>
  {% endif %}
{% endblock %}